<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Spoke</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-light.css">
    <meta name="viewport" content="width=device-width">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>          
    <div class="wrapper">
      <header>
        <h1>Spoke</h1>
        <p>Live display of neural spike data for SpikeGLX software</p>
        <p class="view"><a href="https://github.com/JaneliaAPIG/spoke">View the Project on GitHub <small>JaneliaAPIG/spoke</small></a></p>
        <ul>
          <li><a href="https://github.com/JaneliaAPIG/spoke/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/JaneliaAPIG/spoke/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/JaneliaAPIG/spoke">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
          <img alt="A picture of the WHISPER Extracellular Recording System" title="A picture of the WHISPER Extracellular Recording System" src="WHISPERBOX.JPG"><br>
          <h3>News</h3>
          <ul>
          <li>
              <b>Spoke V1.0 has been released!</b> Please download the latest version of Spoke using the links to the left.
          </li>
          <li>
              <b>IMEC probe</b> support is possible in the future, please let us know if you have an interest in using Spoke with IMEC probes!
          </li>
          </ul>
          <h3>What is Spoke?</h3>
          Spoke is a MATLAB app for live display of neural data from high-channel-count recording systems. It offers multiple experimenter-optimized display modes based on data reduction of high-channel-count data streams.<br><br>
          Spoke is designed around the Whisper extracellular recording system developed at HHMI/Janelia Research Campus in the APIG lab of Tim Harris and its accompanying [SpikeGLX] (https://github.com/billkarsh/SpikeGLX) neural recording software.<br><br>
          Spoke is developed & maintained by the APIG Lab at HHMI/Janelia Research Campus.<br><br>
          <h3>Hardware Requirements</h3>
          <ul>
              <li>
                  <a href="https://www.janelia.org/lab/harris-lab-apig/apig-research/extracellular-electrophysiology#_com_1" target="_blank">Janelia WHISPER Extracellular recording system + Headstage</a>
              </li>
              <li>
                  <a href="http://www.ni.com/en-us/shop/select/multifunction-io-device?modelId=124941" target="_blank">National Instruments NI USB-6366 (or equivalent) X-Series Multifunction DAQ Device</a>
                  <ul>
                    <li>8 simultaneous analog inputs at 2 MS/s/ch with 16-bit resolution; 16 MS/s total AI throughput</li>
                    <li>Deep onboard memory (32 or 64 MS) to ensure finite acquisitions, even with competing USB traffic</li>
                    <li>2 analog outputs, 3.33 MS/s, 16-bit resolution, 10 V</li>
                    <li>24 digital I/O lines (8 hardware-timed up to 1 MHz)</li>
                    <li>Four 32-bit counter/timers for PWM, encoder, frequency, event counting, and more</li>
                    <li>Advanced timing and triggering with NI-STC3 timing and synchronization technology</li>
                 </ul>
              </li>
              <li>
                  <a href="http://sine.ni.com/nips/cds/view/p/lang/en/nid/201628" target="_blank">NI SHC68 cable for X Series, M Series</a> (to connect the WHISPER box to the NI Multifunction DAQ Device) or equivalent.
              </li>
          </ul>
          <h3>Software Requirements</h3>
          <ul>
              <li>
                  <a href="https://www.mathworks.com/products/new_products/release2015b.html" target="_blank">MATLAB 2015b</a><br>
                  <b>Note:</b><i> If you already have a license for MATLAB, you can install MATLAB 2015b and simply register using your existing license. This is important since many users of MATLAB may have initially purchased newer versions of MATLAB. This will not prevent you from installing MATLAB 2015b and using Spoke. Spoke may work with later versions of MATLAB, but it's not guaranteed.</i>
              </li>
              <li>
                  <a href="https://www.mathworks.com/products/signal.html" target="_blank">MATLAB Signal Processing Toolbox</a>
              </li>
              <li>
                  National Instruments Measurement & Automation Explorer (NI MAX) (This is now a component of the full <a href="http://www.ni.com/download/ni-daqmx-15.1.1/5665/en/" target="_blank">NI System Configuration (aka NI DAQmx)</a> software suite.)
              </li>
              <li>
                  <a href="http://billkarsh.github.io/SpikeGLX/" target="_blank">SpikeGLX</a>, written and maintained by Bill Karsh. Spoke has been tested with the latest version of SpikeGLX (Release 20161201).<br>
                  <b>Note:</b> <i>You will need to start SpikeGLX and have an acquisition running prior to starting Spoke. Spoke requires a running SpikeGLX acquisition in order to operate properly.</i>
              </li>
          </ul>
          <h3>Getting Started</h3>
          <a href="WHISPERTONI.JPG" target="_blank"><img src="WHISPERTONI.JPG"></a>
          <ul>
              <li><b>Step 1</b>: Connect the Whisper box to your NI Multifunction DAQ via the shielded cable.</li>
              <li><b>Step 2</b>: Connect the Chronic Headstage to the Whisper box.</li>
              <li><b>Step 3</b>: Start up SpikeGLX</li>
              <ul>
                  <li><img src="spikeglx.JPG"></li>
                  <li><img src="spikeglx_newacq.JPG"></li>
                  <li><img src="config_acq_1.JPG"></li>
                  <li><img src="config_acq_2.JPG"></li>
                  <li><img src="config_acq_3.JPG"></li>
                  <li><img src="config_acq_4.JPG"></li>
                  <li><img src="config_acq_5.JPG"></li>
              </ul>
              <li><b>Step 4</b>: Start up Matlab</li>              
              <li><b>Step 5</b>: Start up Spoke<br><img src="matlab_spoke_start.JPG"></li>
          </ul>          
          <h3>Spoke Controls</h3>
          <ul>
              <li>Spike Detection Mode</li>
              
          </ul>
          <h3>Running an Experiment</h3>
          <ul>
              <li>Spike Detection Mode</li>
              
          </ul>
          <h3>Help! Common Errors and How to Deal with Them</h3>
          <ul>
              <li><img src="spikeglx_error.JPG"></li>
              <li><img src="spikeglx_error2.JPG"></li>
              <li><img src="spikeglx_nopower.jpg"></li>
              <li>
                  Warning: Connection refused (10061) 
> In SpikeGL/ChkConn (line 13)
  In SpikeGL (line 34)
  In SpokeModel (line 242)
  In spoke (line 25) 
Warning: The following error was caught while executing 'SpokeModel' class destructor:
Undefined function 'isvalid' for input arguments of type 'double'. 
> In spoke (line 25) 
Error using SpikeGL/ChkConn (line 14)
Unable to connect to server. Please make sure SpikeGLX is running, and an acquisition has been started. If SpikeGLX is running on a separate machine, please specify the IP address.

Error in SpikeGL (line 34)
    s = ChkConn( s );

Error in SpokeModel (line 242)
            obj.hSGL = SpikeGL(sglIPAddress);

Error in spoke (line 25)
hSpoke = SpokeModel(ipAddress);


SpikeGLX is not currently running an acquisition. If SpikeGLX is running on a different host from the one running Matlab/Spoke, then you must specify the IP Address of the host running SpikeGLX when starting spoke:

spoke('192.168.1.10')
              </li>
              <li>
WARNING. A large number of queued-up samples to read detected: 1587. If intermittent, this should not cause a problem.
WARNING. A large number of queued-up samples to read detected: 16312. If intermittent, this should not cause a problem.
WARNING. A large number of queued-up samples to read detected: 14344. If intermittent, this should not cause a problem.
WARNING. A large number of queued-up samples to read detected: 14518. If intermittent, this should not cause a problem.
              </li>
              <li>
                  
                  
              </li>
          </ul>
      </section>
      <footer>
        <p>This project is owned by Tim Harris' <a href="https://www.janelia.org/lab/harris-lab-apig" target="_blank">Applied Physics and Instrumentation Group</a> (<a href="https://github.com/JaneliaAPIG" target="_blank">JaneliaAPIG</a>) at Janelia Research Campus.</p>
        <p>Current Maintainer and V1.0 Author: Edward Kang (<a href="https://github.com/edwardkangdev" target="_blank">edwardkangdev</a>)</p>
        <p>Initial Implementation and V1.0 Author: Vijay Iyer (<a href="https://github.com/vijayiyer05" target="_blank">vijayiyer5</a>)</p>
        <p>MATLAB interface to <a href="http://billkarsh.github.io/SpikeGLX/" target="_blank">SpikeGLX</a>: Bill Karsh (<a href="https://github.com/billkarsh" target="_blank">billkarsh</a>)</p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>    
  </body>
</html>
